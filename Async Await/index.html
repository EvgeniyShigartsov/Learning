<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script>
      // async function test() {
      //     return Promise.resolve(1)
      // }
      // console.log(test())
      // test().then(console.log)

      // async function f() {
      //     const promise = new Promise((resolve, reject) => {
      //         setTimeout(() => resolve('Ready'), 2000)
      //     })
      //     console.log(promise)
      //     const result = await promise
      //     console.log(result)
      //     console.log(promise)
      // }
      // f()

      // class Theable {
      //     constructor(num) {
      //         this.num = num
      //     }
      //     then(resolve, reject) {
      //         console.log(resolve)
      //         setTimeout(() => resolve(this.num * 2), 2000)
      //     }
      // }
      // async function f() {
      //     const result = await new Theable(5)
      //     console.log(result)
      // }
      // f()

      // class Waiter {
      //     async wait() {
      //         return await Promise.resolve(1)
      //     }
      // }
      // const test = new Waiter().wait().then(console.log)

      // async function f() {
      //     try {
      //         let response = await fetch('/no-user-here')
      //         let user = await response.json()
      //     } catch (err) {
      //         console.log(err)
      //     }
      // }
      // f()

      // async function f() {
      //     const response = await fetch('http://no-such-url')
      // }
      // f().catch(console.log)
      // const url1 = 'vlabla'
      // const url2 = 'haha'
      // async function f() {
      //     const results = await Promise.all([fetch(url1), fetch(url2)])
      //     console.log(results)
      // }
      // f()
      // async function multiply(a, b) {
      //     return a * b
      // }
      // async function foo() {
      //     let result = await multiply(2, 5)
      //     return result
      // }
      // ;(async function () {
      //     let result = await foo()
      //     console.log(result)
      // })()
      // console.log(foo())
      // function main() {
      //     console.log('a')
      //     setTimeout(function exec() {
      //         console.log('b')
      //     })

      //     runWhileLoopForNSeconds(3)
      //     console.log('c')
      // }
      // main()
      // function runWhileLoopForNSeconds(sec) {
      //     let start = Date.now()
      //     now = start

      //     while (now - start < sec * 1000) {
      //         now = Date.now()
      //     }
      // }

      // fetch('https://swapi.dev/api/people/1')

      // async function f(val) {
      //     console.log(val)
      // }

      // console.log(1)
      // f(2)
      // console.log(3) // 1, 2, 3 ....
      // console.log(1)

      // new Promise((res) => {
      //     res(console.log(2))
      // }).then((d) => console.log(d))

      // console.log(3)

      // const example = () => {
      //     const log = (msg) => {
      //         console.log(msg)
      //     }

      //     for(var i = 0; i < 10; i++) {
      //         setTimeout(log, 100, "second timeout" + i);
      //         setTimeout(log, 0, "first timeout" + i);
      //     }
      // }
      // example()
      // example()

      const example1 = () => {
        setTimeout(() => console.log('first'), 1000)
        setTimeout(() => console.log('second'), 0)
        setTimeout(() => console.log('third'), 0)
      }

      // example1();

      const example2 = () => {
        setTimeout(console.log, 0, 'first timeout')

        const intervalID = setInterval(() => {
          console.log('first interval')
          clearInterval(intervalID)
        }, 100)

        setTimeout(console.log, 1000, 'third timeout')
        setTimeout(console.log, 100, 'second timeout')
        setTimeout(console.log, 50, 'fourth timeout')

        console.log('dick')
      }

      // example2()

      const example3 = async () => {
        const number = await new Promise((resolve, reject) => {
          resolve(1)
          console.log(2)
          return 3
        })
          .then((number) => {
            console.log('Then first:', number)
            return number
          })
          .then((number) => {
            console.log('Then second:', number * 2)
            return number * 2
          })
        console.log('number: ', number)
      }

      // example3();

      const example4 = () => {
        console.log('one')
        const promise = new Promise((resolve, reject) => {
          resolve(42)
          console.log('two')

          setTimeout(() => console.log('three'), 0)
        })

        promise.then((result) => {
          console.log('four', result)
        })
      }

      // example4();

      const example5 = () => {
        const promise1 = new Promise((resolve, reject) => {
          setTimeout(() => console.log('timeout one'), 0)

          setTimeout(() => {
            console.log('first console')
            setTimeout(() => console.log('second console'), 0)
            resolve('first promise')
          }, 0)
        })

        const promise2 = new Promise((resolve, reject) => {
          resolve('second promise')
          setTimeout(() => console.log('timeout two'), 0)
        })

        promise1.then((result) => console.log(result))
        promise2.then((result) => console.log(result))
      }

      // second promise,  timeout one, first console, first promise
      // timeout two, second console
      // example5()
    </script>
  </body>
</html>
